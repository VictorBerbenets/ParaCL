// RUN: %paracl %s |& FileCheck %s -dump-input=fail

// RUN: bash %compiler %s -o %t
// RUN: %t |& FileCheck %s -dump-input=fail

//---------------------------ParaCL code---------------------------------------

N = 1000;
Sieve = repeat(0, 1001); // 0..30

p = 2;
while (p <= N) {
  if (!Sieve[p]) {
    i = p * p;
    while (i <= N) {
      Sieve[i] = 1;
      i = i + p;
    }
  }
  p = p + 1;
}

i = 2;
while (i <= N) {
  if (!Sieve[i])
    print i;
  i = i + 1;
}

//-----------------------------------------------------------------------------

// CHECK: 2
// CHECK-NEXT: 3
// CHECK-NEXT: 5
// CHECK-NEXT: 7
// CHECK-NEXT: 11
// CHECK-NEXT: 13
// CHECK-NEXT: 17
// CHECK-NEXT: 19
// CHECK-NEXT: 23
// CHECK-NEXT: 29
// CHECK-NEXT: 31
// CHECK-NEXT: 37
// CHECK-NEXT: 41
// CHECK-NEXT: 43
// CHECK-NEXT: 47
// CHECK-NEXT: 53
// CHECK-NEXT: 59
// CHECK-NEXT: 61
// CHECK-NEXT: 67
// CHECK-NEXT: 71
// CHECK-NEXT: 73
// CHECK-NEXT: 79
// CHECK-NEXT: 83
// CHECK-NEXT: 89
// CHECK-NEXT: 97
// CHECK-NEXT: 101
// CHECK-NEXT: 103
// CHECK-NEXT: 107
// CHECK-NEXT: 109
// CHECK-NEXT: 113
// CHECK-NEXT: 127
// CHECK-NEXT: 131
// CHECK-NEXT: 137
// CHECK-NEXT: 139
// CHECK-NEXT: 149
// CHECK-NEXT: 151
// CHECK-NEXT: 157
// CHECK-NEXT: 163
// CHECK-NEXT: 167
// CHECK-NEXT: 173
// CHECK-NEXT: 179
// CHECK-NEXT: 181
// CHECK-NEXT: 191
// CHECK-NEXT: 193
// CHECK-NEXT: 197
// CHECK-NEXT: 199
// CHECK-NEXT: 211
// CHECK-NEXT: 223
// CHECK-NEXT: 227
// CHECK-NEXT: 229
// CHECK-NEXT: 233
// CHECK-NEXT: 239
// CHECK-NEXT: 241
// CHECK-NEXT: 251
// CHECK-NEXT: 257
// CHECK-NEXT: 263
// CHECK-NEXT: 269
// CHECK-NEXT: 271
// CHECK-NEXT: 277
// CHECK-NEXT: 281
// CHECK-NEXT: 283
// CHECK-NEXT: 293
// CHECK-NEXT: 307
// CHECK-NEXT: 311
// CHECK-NEXT: 313
// CHECK-NEXT: 317
// CHECK-NEXT: 331
// CHECK-NEXT: 337
// CHECK-NEXT: 347
// CHECK-NEXT: 349
// CHECK-NEXT: 353
// CHECK-NEXT: 359
// CHECK-NEXT: 367
// CHECK-NEXT: 373
// CHECK-NEXT: 379
// CHECK-NEXT: 383
// CHECK-NEXT: 389
// CHECK-NEXT: 397
// CHECK-NEXT: 401
// CHECK-NEXT: 409
// CHECK-NEXT: 419
// CHECK-NEXT: 421
// CHECK-NEXT: 431
// CHECK-NEXT: 433
// CHECK-NEXT: 439
// CHECK-NEXT: 443
// CHECK-NEXT: 449
// CHECK-NEXT: 457
// CHECK-NEXT: 461
// CHECK-NEXT: 463
// CHECK-NEXT: 467
// CHECK-NEXT: 479
// CHECK-NEXT: 487
// CHECK-NEXT: 491
// CHECK-NEXT: 499
// CHECK-NEXT: 503
// CHECK-NEXT: 509
// CHECK-NEXT: 521
// CHECK-NEXT: 523
// CHECK-NEXT: 541
// CHECK-NEXT: 547
// CHECK-NEXT: 557
// CHECK-NEXT: 563
// CHECK-NEXT: 569
// CHECK-NEXT: 571
// CHECK-NEXT: 577
// CHECK-NEXT: 587
// CHECK-NEXT: 593
// CHECK-NEXT: 599
// CHECK-NEXT: 601
// CHECK-NEXT: 607
// CHECK-NEXT: 613
// CHECK-NEXT: 617
// CHECK-NEXT: 619
// CHECK-NEXT: 631
// CHECK-NEXT: 641
// CHECK-NEXT: 643
// CHECK-NEXT: 647
// CHECK-NEXT: 653
// CHECK-NEXT: 659
// CHECK-NEXT: 661
// CHECK-NEXT: 673
// CHECK-NEXT: 677
// CHECK-NEXT: 683
// CHECK-NEXT: 691
// CHECK-NEXT: 701
// CHECK-NEXT: 709
// CHECK-NEXT: 719
// CHECK-NEXT: 727
// CHECK-NEXT: 733
// CHECK-NEXT: 739
// CHECK-NEXT: 743
// CHECK-NEXT: 751
// CHECK-NEXT: 757
// CHECK-NEXT: 761
// CHECK-NEXT: 769
// CHECK-NEXT: 773
// CHECK-NEXT: 787
// CHECK-NEXT: 797
// CHECK-NEXT: 809
// CHECK-NEXT: 811
// CHECK-NEXT: 821
// CHECK-NEXT: 823
// CHECK-NEXT: 827
// CHECK-NEXT: 829
// CHECK-NEXT: 839
// CHECK-NEXT: 853
// CHECK-NEXT: 857
// CHECK-NEXT: 859
// CHECK-NEXT: 863
// CHECK-NEXT: 877
// CHECK-NEXT: 881
// CHECK-NEXT: 883
// CHECK-NEXT: 887
// CHECK-NEXT: 907
// CHECK-NEXT: 911
// CHECK-NEXT: 919
// CHECK-NEXT: 929
// CHECK-NEXT: 937
// CHECK-NEXT: 941
// CHECK-NEXT: 947
// CHECK-NEXT: 953
// CHECK-NEXT: 967
// CHECK-NEXT: 971
// CHECK-NEXT: 977
// CHECK-NEXT: 983
// CHECK-NEXT: 991
// CHECK-NEXT: 997
